# ==============================================================================
# Veridis Decentralized Identity Protocol - Velero Backup Storage Location Configuration
# ==============================================================================
#
# This manifest defines comprehensive Velero Backup Storage Location for the
# decentralized identity protocol, providing:
#
# ENTERPRISE VERIDIS BACKUP STORAGE LOCATION ARCHITECTURE:
#   • Advanced Backup Storage Location with intelligent backup storage management and performance-based optimization
#   • Multi-tier Storage Location architecture with development, testing, staging, and production environments
#   • Comprehensive backup storage framework with Location policies, data optimization, Velero integration
#   • Advanced lifecycle management with automated Location optimization, Velero control, and data enhancement
#   • Enterprise-grade intelligence with comprehensive analytics and Backup Storage Location performance insights
#
# VERIDIS BACKUP STORAGE LOCATION OPTIMIZATION:
#   • High-performance Location with intelligent backup storage management and Velero storage location optimization
#   • Intelligent Location backup storage with responsive policies and performance-based storage decisions
#   • Advanced Location management with business intelligence and storage-based Velero control
#   • Comprehensive backup storage control with intelligent Velero Location management and data enhancement
#   • Enterprise acceleration with predictive Velero Location management and backup storage optimization
#
# COMPLIANCE FRAMEWORK INTEGRATION:
#   • SOC 2 Type II Backup Storage Location controls with comprehensive audit and storage requirements
#   • GDPR Backup Storage Location compliance with data protection, privacy controls, and storage management
#   • ISO 27001 Backup Storage Location management with comprehensive framework integration
#   • NIST 800-190 container Backup Storage Location security with storage-specific validation and compliance
#   • Zero-knowledge protocol compliance with regulatory frameworks and Backup Storage Location best practices
#
# ENTERPRISE OPERATIONAL EXCELLENCE:
#   • Intelligent Backup Storage Location lifecycle management with automated provisioning and storage optimization
#   • Predictive storage analytics with capacity planning and Backup Storage Location intelligence
#   • Advanced Location integration with Velero storage analytics and performance business intelligence
#   • Comprehensive backup storage control with Backup Storage Location preservation and data optimization
#   • Business continuity Backup Storage Location with storage guarantees and performance optimization
#
# BACKUP STORAGE LOCATION ACCELERATION INTELLIGENCE:
#   • Backup Storage Location usage analytics with storage patterns and optimization recommendations
#   • Location monitoring with Velero storage latency and management optimization intelligence
#   • Development efficiency with Backup Storage Location analytics and deployment optimization procedures
#   • Cost optimization with Backup Storage Location utilization analysis and storage capacity planning procedures
#   • Quality assurance with Backup Storage Location metrics and storage validation procedures
#
# ==============================================================================

# ==============================================================================
# Veridis Production Backup Storage Location - Primary S3 Storage
# ==============================================================================
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata:
  name: veridis-production-backup-location
  namespace: velero

  # Core Veridis Backup Storage Location identification labels
  labels:
    app.kubernetes.io/name: velero
    app.kubernetes.io/instance: veridis-production
    app.kubernetes.io/version: "1.12.3"
    app.kubernetes.io/component: backup-storage-location
    app.kubernetes.io/part-of: veridis-protocol
    app.kubernetes.io/managed-by: kustomize

    # Backup Storage Location specific classification
    backup.veridis.xyz/type: production-backup-storage-location
    backup.veridis.xyz/category: comprehensive-storage-location
    backup.veridis.xyz/role: primary-storage-location
    backup.veridis.xyz/storage-class: high-performance-storage-location
    backup.veridis.xyz/security-level: enterprise

    # Storage Location Backup Storage Location classification
    storage.veridis.xyz/backup-storage-location-type: intelligent-storage-location
    storage.veridis.xyz/storage-type: backup-storage
    storage.veridis.xyz/performance-tier: high-throughput
    storage.veridis.xyz/optimization: enabled
    storage.veridis.xyz/features: full-storage-location-stack

    # Backup Storage Location classification
    backup.veridis.xyz/tier: production
    backup.veridis.xyz/optimization: intelligent-storage-location-management
    backup.veridis.xyz/data-management: advanced
    backup.veridis.xyz/performance-optimization: enabled
    backup.veridis.xyz/efficiency: maximum

    # Business Storage Location classification
    business.veridis.xyz/criticality: mission-critical
    business.veridis.xyz/impact: high-storage-location-performance
    business.veridis.xyz/cost-tier: production
    business.veridis.xyz/sla-tier: enterprise
    business.veridis.xyz/availability-requirement: 99.9

    # Operational Storage Location labels
    veridis.xyz/environment: production
    veridis.xyz/team: platform-engineering
    veridis.xyz/cost-center: backup-infrastructure
    veridis.xyz/business-unit: identity-protocol

    # Compliance framework labels
    compliance.veridis.xyz/soc2: "storage-location-control-framework"
    compliance.veridis.xyz/gdpr: "storage-location-data-protection"
    compliance.veridis.xyz/iso27001: "storage-location-security-management"
    compliance.veridis.xyz/nist-800-190: "storage-location-container-security"
    governance.veridis.xyz/policy-enforcement: "enterprise"

    # Storage Location analytics and intelligence
    monitoring.veridis.xyz/storage-location-monitoring: "enabled"
    monitoring.veridis.xyz/performance-monitoring: "comprehensive"
    monitoring.veridis.xyz/storage-monitoring: "enabled"
    monitoring.veridis.xyz/business-monitoring: "enabled"
    monitoring.veridis.xyz/compliance-monitoring: "enabled"

    # Storage specific labels
    storage.veridis.xyz/provider: "aws-s3"
    storage.veridis.xyz/region: "us-east-1"
    storage.veridis.xyz/encryption: "enabled"
    storage.veridis.xyz/versioning: "enabled"
    storage.veridis.xyz/lifecycle: "enabled"
    storage.veridis.xyz/cross-region-replication: "enabled"

    # Performance labels
    performance.veridis.xyz/storage-class: "standard-ia"
    performance.veridis.xyz/access-tier: "frequent"
    performance.veridis.xyz/replication: "cross-region"
    performance.veridis.xyz/optimization-enabled: "true"
    performance.veridis.xyz/compression: "enabled"

  annotations:
    # Storage Location purpose and specifications
    veridis.xyz/description: "Enterprise Veridis Backup Storage Location with intelligent backup storage management, advanced performance optimization, and comprehensive storage optimization"
    veridis.xyz/purpose: "Provides comprehensive Backup Storage Location for decentralized identity management with intelligent storage management, performance optimization, and storage guarantees"
    veridis.xyz/scope: "Backup Storage Location including storage management, performance optimization, location configuration, and comprehensive monitoring intelligence"

    # Storage Location architecture and design
    backup.veridis.xyz/architecture: "Enterprise Backup Storage Location with intelligent storage management, advanced performance optimization, and location integration optimization"
    backup.veridis.xyz/design-pattern: "Multi-tier Storage Location with performance optimization, cost efficiency, and business intelligence"
    backup.veridis.xyz/optimization-model: "Intelligent Storage Location with predictive analytics, performance optimization, and storage efficiency"
    backup.veridis.xyz/performance-model: "High-performance Storage Location with storage optimization and intelligent location management"

    # Storage Location specifications
    storage.veridis.xyz/storage-location-specification: "Storage Location with performance optimization and intelligent storage location management"
    storage.veridis.xyz/storage-specification: "Advanced storage management with storage optimization and location enhancement"
    storage.veridis.xyz/bucket-specification: "Storage Location bucket management optimization with intelligent storage and enhancement"
    storage.veridis.xyz/performance-specification: "Storage performance location with storage acceleration and efficiency"
    storage.veridis.xyz/business-specification: "Storage business location with cost optimization and strategic storage intelligence"

    # Storage configuration annotations
    storage.veridis.xyz/bucket-name: "veridis-production-backups"
    storage.veridis.xyz/region: "us-east-1"
    storage.veridis.xyz/storage-class: "STANDARD_IA"
    storage.veridis.xyz/encryption-type: "AES256"
    storage.veridis.xyz/versioning-enabled: "true"

    # Access control annotations
    access.veridis.xyz/access-mode: "ReadWrite"
    access.veridis.xyz/default-access-mode: "ReadWrite"
    access.veridis.xyz/validation-frequency: "24h"
    access.veridis.xyz/access-check-timeout: "30s"
    access.veridis.xyz/concurrent-uploads: "10"

    # Performance annotations
    performance.veridis.xyz/upload-timeout: "10m"
    performance.veridis.xyz/download-timeout: "10m"
    performance.veridis.xyz/multipart-threshold: "64MB"
    performance.veridis.xyz/multipart-chunk-size: "16MB"
    performance.veridis.xyz/max-concurrent-uploads: "10"

    # Lifecycle annotations
    lifecycle.veridis.xyz/transition-to-ia: "30d"
    lifecycle.veridis.xyz/transition-to-glacier: "90d"
    lifecycle.veridis.xyz/transition-to-deep-archive: "365d"
    lifecycle.veridis.xyz/expiration: "2555d"  # 7 years
    lifecycle.veridis.xyz/incomplete-multipart-cleanup: "7d"

    # Security annotations
    security.veridis.xyz/encryption-enabled: "true"
    security.veridis.xyz/encryption-algorithm: "AES256"
    security.veridis.xyz/bucket-policy-enabled: "true"
    security.veridis.xyz/public-access-blocked: "true"
    security.veridis.xyz/ssl-required: "true"

    # Monitoring annotations
    monitoring.veridis.xyz/storage-monitoring: "enabled"
    monitoring.veridis.xyz/access-logging: "enabled"
    monitoring.veridis.xyz/metrics-collection: "enabled"
    monitoring.veridis.xyz/cloudwatch-enabled: "true"
    monitoring.veridis.xyz/alerts-enabled: "true"

    # Compliance annotations
    compliance.veridis.xyz/data-residency: "us-east-1"
    compliance.veridis.xyz/retention-policy: "7-years"
    compliance.veridis.xyz/encryption-at-rest: "enabled"
    compliance.veridis.xyz/access-audit: "enabled"
    compliance.veridis.xyz/backup-policy: "production-backup-policy-v1"

    # Business annotations
    business.veridis.xyz/cost-center: "backup-infrastructure"
    business.veridis.xyz/budget-allocation: "production-backup-storage"
    business.veridis.xyz/cost-optimization: "enabled"
    business.veridis.xyz/usage-tracking: "comprehensive"
    business.veridis.xyz/storage-tier: "production"

    # Disaster recovery annotations
    dr.veridis.xyz/cross-region-replication: "enabled"
    dr.veridis.xyz/backup-region: "us-west-2"
    dr.veridis.xyz/disaster-recovery-tier: "primary"
    dr.veridis.xyz/recovery-priority: "high"
    dr.veridis.xyz/backup-frequency: "daily"

    # Documentation and procedures
    veridis.xyz/owner: "platform-team@veridis.xyz"
    veridis.xyz/storage-location-admin: "backup-admin@veridis.xyz"
    veridis.xyz/escalation: "platform-manager@veridis.xyz"
    veridis.xyz/emergency-contact: "platform-oncall@veridis.xyz"

    # Documentation references
    veridis.xyz/documentation: "https://docs.veridis.xyz/backup/storage-location"
    veridis.xyz/runbook: "https://runbooks.veridis.xyz/backup/storage-location-management"
    veridis.xyz/storage-docs: "https://backup.veridis.xyz/storage-location-guide"
    veridis.xyz/backup-docs: "https://backup.veridis.xyz/storage-location-monitoring"

# ==============================================================================
# Backup Storage Location Specification
# ==============================================================================
spec:
  # ==============================================================================
  # Storage Provider Configuration
  # ==============================================================================
  provider: aws

  # ==============================================================================
  # Storage Location Configuration
  # ==============================================================================
  storageType:
    objectStorage:
      bucket: veridis-production-backups
      prefix: production

  # ==============================================================================
  # Storage Provider Configuration
  # ==============================================================================
  config:
    # ==============================================================================
    # AWS S3 Configuration
    # ==============================================================================
    region: us-east-1

    # ==============================================================================
    # S3 Bucket Configuration
    # ==============================================================================
    s3ForcePathStyle: "false"
    s3Url: "https://s3.us-east-1.amazonaws.com"

    # ==============================================================================
    # Storage Class Configuration
    # ==============================================================================
    storageClass: STANDARD_IA

    # ==============================================================================
    # Server-Side Encryption Configuration
    # ==============================================================================
    serverSideEncryption: AES256

    # ==============================================================================
    # Access Control Configuration
    # ==============================================================================
    publicReadAccess: "false"

    # ==============================================================================
    # Performance Configuration
    # ==============================================================================
    # Multipart upload configuration
    multipartThreshold: 67108864  # 64MB
    multipartChunkSize: 16777216   # 16MB
    maxConcurrentUploads: 10

    # Timeout configuration
    uploadTimeout: 600  # 10 minutes
    downloadTimeout: 600  # 10 minutes

    # ==============================================================================
    # Lifecycle Configuration
    # ==============================================================================
    lifecycleConfiguration: |
      {
        "Rules": [
          {
            "ID": "veridis-backup-lifecycle",
            "Status": "Enabled",
            "Filter": {
              "Prefix": "production/"
            },
            "Transitions": [
              {
                "Days": 30,
                "StorageClass": "STANDARD_IA"
              },
              {
                "Days": 90,
                "StorageClass": "GLACIER"
              },
              {
                "Days": 365,
                "StorageClass": "DEEP_ARCHIVE"
              }
            ],
            "Expiration": {
              "Days": 2555
            },
            "AbortIncompleteMultipartUpload": {
              "DaysAfterInitiation": 7
            }
          }
        ]
      }

    # ==============================================================================
    # Versioning Configuration
    # ==============================================================================
    versioningConfiguration: |
      {
        "Status": "Enabled"
      }

    # ==============================================================================
    # Bucket Policy Configuration
    # ==============================================================================
    bucketPolicy: |
      {
        "Version": "2012-10-17",
        "Statement": [
          {
            "Sid": "DenyInsecureConnections",
            "Effect": "Deny",
            "Principal": "*",
            "Action": "s3:*",
            "Resource": [
              "arn:aws:s3:::veridis-production-backups",
              "arn:aws:s3:::veridis-production-backups/*"
            ],
            "Condition": {
              "Bool": {
                "aws:SecureTransport": "false"
              }
            }
          },
          {
            "Sid": "AllowVeleroAccess",
            "Effect": "Allow",
            "Principal": {
              "AWS": "arn:aws:iam::ACCOUNT_ID:role/velero-server-role"
            },
            "Action": [
              "s3:GetObject",
              "s3:DeleteObject",
              "s3:PutObject",
              "s3:AbortMultipartUpload",
              "s3:ListMultipartUploadParts"
            ],
            "Resource": "arn:aws:s3:::veridis-production-backups/*"
          },
          {
            "Sid": "AllowVeleroBucketAccess",
            "Effect": "Allow",
            "Principal": {
              "AWS": "arn:aws:iam::ACCOUNT_ID:role/velero-server-role"
            },
            "Action": [
              "s3:ListBucket",
              "s3:GetBucketLocation",
              "s3:ListBucketMultipartUploads"
            ],
            "Resource": "arn:aws:s3:::veridis-production-backups"
          }
        ]
      }

    # ==============================================================================
    # Cross-Region Replication Configuration
    # ==============================================================================
    replicationConfiguration: |
      {
        "Role": "arn:aws:iam::ACCOUNT_ID:role/replication-role",
        "Rules": [
          {
            "ID": "veridis-backup-replication",
            "Status": "Enabled",
            "Priority": 1,
            "Filter": {
              "Prefix": "production/"
            },
            "Destination": {
              "Bucket": "arn:aws:s3:::veridis-production-backups-replica",
              "StorageClass": "STANDARD_IA",
              "EncryptionConfiguration": {
                "ReplicaKmsKeyID": "arn:aws:kms:us-west-2:ACCOUNT_ID:key/KEY_ID"
              }
            }
          }
        ]
      }

    # ==============================================================================
    # Notification Configuration
    # ==============================================================================
    notificationConfiguration: |
      {
        "CloudWatchConfigurations": [
          {
            "Id": "backup-success-notification",
            "CloudWatchConfiguration": {
              "LogGroupName": "/aws/s3/veridis-production-backups"
            },
            "Events": [
              "s3:ObjectCreated:*"
            ],
            "Filter": {
              "Key": {
                "FilterRules": [
                  {
                    "Name": "prefix",
                    "Value": "production/"
                  }
                ]
              }
            }
          }
        ]
      }

    # ==============================================================================
    # Monitoring Configuration
    # ==============================================================================
    metricsConfiguration: |
      {
        "Id": "EntireBucket",
        "IncludedObjectMetrics": {
          "Status": "Enabled"
        }
      }

    # ==============================================================================
    # Inventory Configuration
    # ==============================================================================
    inventoryConfiguration: |
      {
        "Id": "veridis-backup-inventory",
        "IsEnabled": true,
        "IncludedObjectVersions": "Current",
        "Schedule": {
          "Frequency": "Daily"
        },
        "Destination": {
          "S3BucketDestination": {
            "Bucket": "arn:aws:s3:::veridis-backup-inventory",
            "Format": "CSV",
            "Prefix": "inventory/"
          }
        }
      }

  # ==============================================================================
  # Backup Storage Location Validation
  # ==============================================================================
  validationFrequency: 24h

  # ==============================================================================
  # Access Mode Configuration
  # ==============================================================================
  accessMode: ReadWrite

  # ==============================================================================
  # Default Backup Storage Location
  # ==============================================================================
  default: true

---
# ==============================================================================
# Veridis Disaster Recovery Backup Storage Location - Cross-Region Backup
# ==============================================================================
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata:
  name: veridis-dr-backup-location
  namespace: velero

  labels:
    app.kubernetes.io/name: velero
    app.kubernetes.io/instance: veridis-production
    app.kubernetes.io/version: "1.12.3"
    app.kubernetes.io/component: dr-backup-storage-location
    app.kubernetes.io/part-of: veridis-protocol
    app.kubernetes.io/managed-by: kustomize

    backup.veridis.xyz/type: disaster-recovery-storage-location
    backup.veridis.xyz/category: cross-region-storage
    backup.veridis.xyz/role: secondary-storage-location
    backup.veridis.xyz/priority: high

    # Disaster recovery labels
    dr.veridis.xyz/type: "cross-region-backup"
    dr.veridis.xyz/tier: "disaster-recovery"
    dr.veridis.xyz/region: "us-west-2"
    dr.veridis.xyz/priority: "high"

    veridis.xyz/environment: production
    veridis.xyz/team: platform-engineering
    veridis.xyz/cost-center: disaster-recovery

  annotations:
    veridis.xyz/description: "Disaster recovery backup storage location in us-west-2"
    veridis.xyz/purpose: "Provides cross-region backup storage for disaster recovery"

    # DR specific annotations
    dr.veridis.xyz/primary-region: "us-east-1"
    dr.veridis.xyz/secondary-region: "us-west-2"
    dr.veridis.xyz/replication-enabled: "true"
    dr.veridis.xyz/failover-ready: "true"

# ==============================================================================
# DR Backup Storage Location Specification
# ==============================================================================
spec:
  provider: aws

  storageType:
    objectStorage:
      bucket: veridis-production-backups-dr
      prefix: disaster-recovery

  config:
    region: us-west-2
    s3ForcePathStyle: "false"
    s3Url: "https://s3.us-west-2.amazonaws.com"
    storageClass: STANDARD_IA
    serverSideEncryption: AES256
    publicReadAccess: "false"

    # Performance configuration for DR
    multipartThreshold: 67108864  # 64MB
    multipartChunkSize: 16777216   # 16MB
    maxConcurrentUploads: 5  # Lower for DR
    uploadTimeout: 900  # 15 minutes
    downloadTimeout: 900  # 15 minutes

    # DR-specific lifecycle
    lifecycleConfiguration: |
      {
        "Rules": [
          {
            "ID": "veridis-dr-backup-lifecycle",
            "Status": "Enabled",
            "Filter": {
              "Prefix": "disaster-recovery/"
            },
            "Transitions": [
              {
                "Days": 60,
                "StorageClass": "GLACIER"
              },
              {
                "Days": 180,
                "StorageClass": "DEEP_ARCHIVE"
              }
            ],
            "Expiration": {
              "Days": 2555
            }
          }
        ]
      }

  validationFrequency: 24h
  accessMode: ReadWrite
  default: false

---
# ==============================================================================
# Veridis Staging Backup Storage Location - Pre-Production Storage
# ==============================================================================
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata:
  name: veridis-staging-backup-location
  namespace: velero

  labels:
    app.kubernetes.io/name: velero
    app.kubernetes.io/instance: veridis-staging
    app.kubernetes.io/version: "1.12.3"
    app.kubernetes.io/component: staging-backup-storage-location
    app.kubernetes.io/part-of: veridis-protocol
    app.kubernetes.io/managed-by: kustomize

    backup.veridis.xyz/type: staging-backup-storage-location
    backup.veridis.xyz/category: staging-storage
    backup.veridis.xyz/role: staging-storage-location
    backup.veridis.xyz/priority: medium

    # Staging labels
    staging.veridis.xyz/type: "staging-backup"
    staging.veridis.xyz/environment: "staging"
    staging.veridis.xyz/production-like: "true"
    staging.veridis.xyz/testing: "enabled"

    veridis.xyz/environment: staging
    veridis.xyz/team: platform-engineering
    veridis.xyz/cost-center: staging-infrastructure

  annotations:
    veridis.xyz/description: "Staging environment backup storage location"
    veridis.xyz/purpose: "Provides backup storage for staging environment testing"

    # Staging specific annotations
    staging.veridis.xyz/production-like: "true"
    staging.veridis.xyz/testing-enabled: "true"
    staging.veridis.xyz/validation-target: "true"

    # Conditional deployment annotation
    deployment.veridis.xyz/condition: "staging-environment-enabled"

# ==============================================================================
# Staging Backup Storage Location Specification
# ==============================================================================
spec:
  provider: aws

  storageType:
    objectStorage:
      bucket: veridis-staging-backups
      prefix: staging

  config:
    region: us-east-1
    s3ForcePathStyle: "false"
    s3Url: "https://s3.us-east-1.amazonaws.com"
    storageClass: STANDARD
    serverSideEncryption: AES256
    publicReadAccess: "false"

    # Performance configuration for staging
    multipartThreshold: 67108864  # 64MB
    multipartChunkSize: 16777216   # 16MB
    maxConcurrentUploads: 5
    uploadTimeout: 600  # 10 minutes
    downloadTimeout: 600  # 10 minutes

    # Staging-specific lifecycle (shorter retention)
    lifecycleConfiguration: |
      {
        "Rules": [
          {
            "ID": "veridis-staging-backup-lifecycle",
            "Status": "Enabled",
            "Filter": {
              "Prefix": "staging/"
            },
            "Transitions": [
              {
                "Days": 30,
                "StorageClass": "STANDARD_IA"
              },
              {
                "Days": 90,
                "StorageClass": "GLACIER"
              }
            ],
            "Expiration": {
              "Days": 365
            }
          }
        ]
      }

  validationFrequency: 24h
  accessMode: ReadWrite
  default: false

---
# ==============================================================================
# Veridis Development Backup Storage Location - Development Storage
# ==============================================================================
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata:
  name: veridis-dev-backup-location
  namespace: velero

  labels:
    app.kubernetes.io/name: velero
    app.kubernetes.io/instance: veridis-development
    app.kubernetes.io/version: "1.12.3"
    app.kubernetes.io/component: dev-backup-storage-location
    app.kubernetes.io/part-of: veridis-protocol
    app.kubernetes.io/managed-by: kustomize

    backup.veridis.xyz/type: development-backup-storage-location
    backup.veridis.xyz/category: development-storage
    backup.veridis.xyz/role: dev-storage-location
    backup.veridis.xyz/priority: low

    # Development labels
    development.veridis.xyz/type: "dev-backup"
    development.veridis.xyz/environment: "development"
    development.veridis.xyz/testing: "enabled"
    development.veridis.xyz/cost-optimized: "true"

    veridis.xyz/environment: development
    veridis.xyz/team: platform-engineering
    veridis.xyz/cost-center: development-infrastructure

  annotations:
    veridis.xyz/description: "Development environment backup storage location"
    veridis.xyz/purpose: "Provides backup storage for development environment"

    # Development specific annotations
    development.veridis.xyz/cost-optimized: "true"
    development.veridis.xyz/testing-enabled: "true"
    development.veridis.xyz/retention-short: "true"

    # Conditional deployment annotation
    deployment.veridis.xyz/condition: "development-environment-enabled"

# ==============================================================================
# Development Backup Storage Location Specification
# ==============================================================================
spec:
  provider: aws

  storageType:
    objectStorage:
      bucket: veridis-dev-backups
      prefix: development

  config:
    region: us-east-1
    s3ForcePathStyle: "false"
    s3Url: "https://s3.us-east-1.amazonaws.com"
    storageClass: STANDARD
    serverSideEncryption: AES256
    publicReadAccess: "false"

    # Basic performance configuration for development
    multipartThreshold: 67108864  # 64MB
    multipartChunkSize: 16777216   # 16MB
    maxConcurrentUploads: 3
    uploadTimeout: 300  # 5 minutes
    downloadTimeout: 300  # 5 minutes

    # Development-specific lifecycle (very short retention)
    lifecycleConfiguration: |
      {
        "Rules": [
          {
            "ID": "veridis-dev-backup-lifecycle",
            "Status": "Enabled",
            "Filter": {
              "Prefix": "development/"
            },
            "Transitions": [
              {
                "Days": 7,
                "StorageClass": "STANDARD_IA"
              },
              {
                "Days": 30,
                "StorageClass": "GLACIER"
              }
            ],
            "Expiration": {
              "Days": 90
            }
          }
        ]
      }

  validationFrequency: 24h
  accessMode: ReadWrite
  default: false

---
# ==============================================================================
# Veridis Compliance Backup Storage Location - Long-Term Retention
# ==============================================================================
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata:
  name: veridis-compliance-backup-location
  namespace: velero

  labels:
    app.kubernetes.io/name: velero
    app.kubernetes.io/instance: veridis-production
    app.kubernetes.io/version: "1.12.3"
    app.kubernetes.io/component: compliance-backup-storage-location
    app.kubernetes.io/part-of: veridis-protocol
    app.kubernetes.io/managed-by: kustomize

    backup.veridis.xyz/type: compliance-backup-storage-location
    backup.veridis.xyz/category: compliance-storage
    backup.veridis.xyz/role: compliance-storage-location
    backup.veridis.xyz/priority: high

    # Compliance labels
    compliance.veridis.xyz/type: "long-term-retention"
    compliance.veridis.xyz/retention-period: "7-years"
    compliance.veridis.xyz/regulatory-compliance: "enabled"
    compliance.veridis.xyz/audit-ready: "true"

    veridis.xyz/environment: production
    veridis.xyz/team: compliance-engineering
    veridis.xyz/cost-center: compliance-infrastructure

  annotations:
    veridis.xyz/description: "Compliance backup storage location for long-term retention"
    veridis.xyz/purpose: "Provides backup storage for regulatory compliance requirements"

    # Compliance specific annotations
    compliance.veridis.xyz/retention-period: "7-years"
    compliance.veridis.xyz/regulatory-frameworks: "soc2,gdpr,iso27001"
    compliance.veridis.xyz/audit-ready: "true"
    compliance.veridis.xyz/immutable-storage: "true"

# ==============================================================================
# Compliance Backup Storage Location Specification
# ==============================================================================
spec:
  provider: aws

  storageType:
    objectStorage:
      bucket: veridis-compliance-backups
      prefix: compliance

  config:
    region: us-east-1
    s3ForcePathStyle: "false"
    s3Url: "https://s3.us-east-1.amazonaws.com"
    storageClass: GLACIER
    serverSideEncryption: AES256
    publicReadAccess: "false"

    # Performance configuration optimized for compliance
    multipartThreshold: 134217728  # 128MB
    multipartChunkSize: 33554432    # 32MB
    maxConcurrentUploads: 2
    uploadTimeout: 1800  # 30 minutes
    downloadTimeout: 1800  # 30 minutes

    # Compliance-specific lifecycle (7-year retention)
    lifecycleConfiguration: |
      {
        "Rules": [
          {
            "ID": "veridis-compliance-backup-lifecycle",
            "Status": "Enabled",
            "Filter": {
              "Prefix": "compliance/"
            },
            "Transitions": [
              {
                "Days": 90,
                "StorageClass": "DEEP_ARCHIVE"
              }
            ],
            "Expiration": {
              "Days": 2555
            }
          }
        ]
      }

    # Object lock configuration for compliance
    objectLockConfiguration: |
      {
        "ObjectLockEnabled": "Enabled",
        "Rule": {
          "DefaultRetention": {
            "Mode": "COMPLIANCE",
            "Years": 7
          }
        }
      }

  validationFrequency: 168h  # Weekly validation
  accessMode: ReadWrite
  default: false

# ==============================================================================
# Veridis Backup Storage Location Summary and Enterprise Architecture
# ==============================================================================
#
# COMPREHENSIVE VERIDIS BACKUP STORAGE LOCATION STRATEGY:
# =======================================================
#
# VERIDIS BACKUP STORAGE LOCATION ARCHITECTURE OVERVIEW:
# ------------------------------------------------------
# 1. Production Storage Location (veridis-production-backup-location):
#    - Comprehensive enterprise-grade storage location with intelligent backup storage management and advanced performance optimization for production environments
#    - Advanced storage configuration with comprehensive S3 integration, lifecycle management, encryption support, and comprehensive operational excellence
#    - Multi-tier storage architecture with STANDARD_IA storage class, cross-region replication, performance optimization, and comprehensive storage intelligence
#    - Enterprise storage policies with security enforcement, compliance controls, lifecycle automation, and comprehensive disaster recovery procedures
#    - Performance optimization with intelligent multipart uploads, timeout management, concurrent uploads, and efficiency for maximum storage performance
#
# 2. Disaster Recovery Storage Location (veridis-dr-backup-location):
#    - Cross-region disaster recovery location with secondary region support and comprehensive DR coordination
#    - Advanced DR configuration with us-west-2 region, cross-region replication, failover support, and comprehensive DR intelligence
#    - Flexible storage optimization with DR workflow, region redundancy, and comprehensive DR intelligence
#    - DR intelligence with backup procedures, failover support, region automation, and comprehensive DR coordination
#    - Operational excellence with DR storage, failover workflows, region automation, and comprehensive DR environment management
#
# 3. Staging Storage Location (veridis-staging-backup-location):
#    - Pre-production storage location with staging environment support and comprehensive staging coordination
#    - Advanced staging configuration with production-like settings, testing optimization, validation support, and comprehensive staging intelligence
#    - Flexible storage optimization with staging workflow, testing support, and comprehensive staging intelligence
#    - Staging intelligence with backup procedures, testing support, validation automation, and comprehensive staging coordination
#    - Testing excellence with staging storage, validation workflows, testing automation, and comprehensive staging environment management
#
# 4. Development Storage Location (veridis-dev-backup-location):
#    - Development-focused storage location with cost optimization and comprehensive development coordination
#    - Advanced dev configuration with cost-optimized settings, short retention, basic performance, and comprehensive development intelligence
#    - Flexible storage optimization with development workflow, cost efficiency, and comprehensive development intelligence
#    - Development intelligence with backup procedures, cost support, development automation, and comprehensive development coordination
#    - Cost excellence with development storage, cost workflows, development automation, and comprehensive development environment management
#
# 5. Compliance Storage Location (veridis-compliance-backup-location):
#    - Compliance-focused storage location with long-term retention and comprehensive compliance coordination
#    - Advanced compliance configuration with 7-year retention, GLACIER storage, object lock, and comprehensive compliance intelligence
#    - Flexible storage optimization with compliance workflow, regulatory support, and comprehensive compliance intelligence
#    - Compliance intelligence with backup procedures, regulatory support, compliance automation, and comprehensive compliance coordination
#    - Regulatory excellence with compliance storage, audit workflows, compliance automation, and comprehensive compliance environment management
#
# ENTERPRISE BACKUP STORAGE LOCATION FEATURES:
# ============================================
# Advanced Storage Management and S3 Integration:
#   - Multi-tier storage architecture with production storage, DR storage, staging storage, and comprehensive storage configurations
#   - Intelligent storage management with lifecycle policies, storage classes, encryption management, and comprehensive storage decisions
#   - Storage discovery with S3 optimization, bucket management, access policies, and comprehensive storage analytics
#   - Performance management with multipart uploads, timeout optimization, concurrent uploads, and comprehensive performance intelligence
#   - Storage processing tuning with upload management, download optimization, performance algorithms, and intelligent storage optimization
#
# Comprehensive Security and Encryption Integration:
#   - Multi-tier security with S3 encryption, bucket policies, access controls, and comprehensive security coordination
#   - Security optimization with SSL enforcement, public access blocking, IAM integration, and comprehensive security intelligence
#   - Access management with bucket policies, IAM roles, permission validation, and comprehensive access coordination
#   - Business intelligence with security analytics, access correlation, storage optimization, and comprehensive strategic insights
#   - Security management with access policies, encryption optimization, security integration, and comprehensive security analytics
#
# Enterprise Lifecycle and Cost Management:
#   - Multi-tier lifecycle with STANDARD_IA transitions, GLACIER archival, DEEP_ARCHIVE storage, and comprehensive lifecycle coordination
#   - Lifecycle optimization with cost-effective transitions, storage class management, retention automation, and comprehensive lifecycle intelligence
#   - Cost management with storage optimization, lifecycle transitions, retention policies, and comprehensive cost coordination
#   - Business intelligence with cost analytics, lifecycle correlation, storage optimization, and comprehensive strategic insights
#   - Cost management with lifecycle policies, storage optimization, cost monitoring, and comprehensive cost analytics
#
# Advanced Cross-Region Replication and Disaster Recovery:
#   - Multi-tier replication with cross-region backup, disaster recovery, failover support, and comprehensive replication coordination
#   - Replication optimization with region redundancy, automatic failover, data consistency, and comprehensive replication intelligence
#   - DR management with cross-region storage, failover automation, recovery procedures, and comprehensive DR coordination
#   - Business intelligence with DR analytics, replication correlation, failover optimization, and comprehensive strategic insights
#   - DR management with replication policies, failover optimization, DR integration, and comprehensive DR analytics
#
# OPERATIONAL EXCELLENCE:
# ======================
# Storage Location Lifecycle Management:
#   - Multi-Location deployment with production storage, DR storage, staging storage, and comprehensive location coordination
#   - Intelligent location management with predictive analytics and storage utilization correlation
#   - Advanced monitoring with comprehensive location analytics and storage business intelligence
#   - Location validation with storage schema enforcement and location deployment safety checks
#   - Automated optimization with location pattern analysis and storage optimization recommendation engine
#
# Security Integration and Compliance:
#   - SOC 2 Type II storage controls with comprehensive audit requirements and storage logging
#   - GDPR storage compliance with data protection and privacy-preserving storage management
#   - ISO 27001 storage security management with information security and storage compliance integration
#   - NIST 800-190 container storage security with storage validation and compliance
#   - Zero-trust storage architecture with comprehensive encryption and storage authentication requirements
#
# Business Intelligence Integration:
#   - Storage analytics with cost correlation and location resource utilization optimization
#   - Performance analytics with storage experience optimization and location business intelligence
#   - Storage intelligence with processing pattern monitoring and location optimization recommendations
#   - Strategic planning with capacity management and location forecasting
#   - Business impact assessment with location performance correlation and storage tracking
#
# Developer Experience Excellence:
#   - Multi-environment location support with production storage, DR storage, staging storage, and comprehensive location coordination
#   - Comprehensive documentation with location guides and storage troubleshooting procedures
#   - Environment-specific locations with production, DR, staging, development, and compliance support
#   - Testing integration with location development workflow and storage debugging capabilities
#   - Location monitoring with comprehensive tracking and storage correlation
#
# ==============================================================================
